{
  "info": {
    "name": "FlaskAPI Collection",
    "description": "A comprehensive collection for the Flask Bookstore API. This API provides endpoints for user authentication, book management, shopping cart, orders, reviews, and administrative functions.\n\n## Authentication\nMost endpoints require JWT authentication. Use the `/api/v1/auth/login` endpoint to obtain access and refresh tokens.\n\n## Base URL\nSet the `{{base_url}}` variable to your API server address (e.g., `http://localhost:5000`).",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Auth",
      "description": "Authentication endpoints for user registration, login, and profile management",
      "item": [
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"johndoe\",\n  \"name\": \"John Doe\",\n  \"email\": \"john@example.com\",\n  \"password\": \"password123\",\n  \"phone_number\": \"12345678901\",\n  \"address\": \"123 Main St\",\n  \"city\": \"New York\",\n  \"province\": \"NY\"\n}"
            },
            "url": "{{base_url}}/api/v1/auth/register",
            "description": "Register a new user account. Username must be 3-20 alphanumeric characters. Password must be at least 6 characters with at least one letter and one number."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has success message\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "    pm.expect(jsonData.message).to.include('registered');",
                  "});",
                  "",
                  "pm.test(\"Response contains user data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('user');",
                  "    pm.expect(jsonData.user).to.have.property('username');",
                  "    pm.expect(jsonData.user).to.have.property('email');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"johndoe\",\n  \"password\": \"password123\"\n}"
            },
            "url": "{{base_url}}/api/v1/auth/login",
            "description": "Login with username/email and password. Returns access_token and refresh_token for authenticated requests."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response contains tokens\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('access_token');",
                  "    pm.expect(jsonData).to.have.property('refresh_token');",
                  "});",
                  "",
                  "// Save tokens to environment variables",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.environment.set(\"access_token\", jsonData.access_token);",
                  "    pm.environment.set(\"refresh_token\", jsonData.refresh_token);",
                  "    console.log(\"Tokens saved to environment\");",
                  "}",
                  "",
                  "pm.test(\"Response time is less than 1000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(1000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": [
            {
              "name": "Login Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"username\": \"johndoe\",\n  \"password\": \"password123\"\n}"
                },
                "url": "{{base_url}}/api/v1/auth/login"
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"access_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n  \"refresh_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n  \"user\": {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"username\": \"johndoe\",\n    \"email\": \"john@example.com\",\n    \"name\": \"John Doe\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{refresh_token}}"
              }
            ],
            "url": "{{base_url}}/api/v1/auth/refresh",
            "description": "Refresh the access token using a valid refresh token."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response contains new access token\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('access_token');",
                  "});",
                  "",
                  "// Update access token in environment",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.environment.set(\"access_token\", jsonData.access_token);",
                  "    console.log(\"Access token refreshed\");",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": "{{base_url}}/api/v1/auth/me",
            "description": "Get the currently authenticated user's profile information."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"User data structure is valid\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData).to.have.property('username');",
                  "    pm.expect(jsonData).to.have.property('email');",
                  "    pm.expect(jsonData).to.have.property('name');",
                  "});",
                  "",
                  "pm.test(\"Email format is valid\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.email).to.match(/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Change Password",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"old_password\": \"password123\",\n  \"new_password\": \"newpassword456\"\n}"
            },
            "url": "{{base_url}}/api/v1/auth/change-password",
            "description": "Change the current user's password. Requires the old password for verification."
          }
        },
        {
          "name": "Update Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"John Updated\",\n  \"email\": \"john.updated@example.com\",\n  \"phone_number\": \"12345678901\",\n  \"address\": \"456 New St\",\n  \"city\": \"Los Angeles\",\n  \"province\": \"CA\"\n}"
            },
            "url": "{{base_url}}/api/v1/auth/profile",
            "description": "Update the current user's profile information."
          }
        }
      ]
    },
    {
      "name": "Users",
      "description": "User management endpoints",
      "item": [
        {
          "name": "Get All Users",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/api/v1/users",
            "description": "Retrieve a list of all users."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is an array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});",
                  "",
                  "pm.test(\"Users have required fields\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.length > 0) {",
                  "        pm.expect(jsonData[0]).to.have.property('id');",
                  "        pm.expect(jsonData[0]).to.have.property('username');",
                  "        pm.expect(jsonData[0]).to.have.property('email');",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get User by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/api/v1/users/:user_id",
            "description": "Get a specific user by their ID."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"User object structure is valid\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('object');",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData).to.have.property('username');",
                  "    pm.expect(jsonData).to.have.property('email');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Create User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"newuser\",\n  \"name\": \"New User\",\n  \"email\": \"newuser@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": "{{base_url}}/api/v1/users",
            "description": "Create a new user."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"User created successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData).to.have.property('username');",
                  "});",
                  "",
                  "// Save created user ID for subsequent requests",
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set(\"created_user_id\", jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": [
            {
              "name": "Create User Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"username\": \"newuser\",\n  \"name\": \"New User\",\n  \"email\": \"newuser@example.com\",\n  \"password\": \"password123\"\n}"
                },
                "url": "{{base_url}}/api/v1/users"
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"id\": \"660e8400-e29b-41d4-a716-446655440001\",\n  \"username\": \"newuser\",\n  \"name\": \"New User\",\n  \"email\": \"newuser@example.com\",\n  \"created_at\": \"2025-12-18T10:00:00Z\"\n}"
            }
          ]
        },
        {
          "name": "Update User",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Name\",\n  \"email\": \"updated@example.com\"\n}"
            },
            "url": "{{base_url}}/api/v1/users/:user_id",
            "description": "Update an existing user's information."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"User updated successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "    pm.expect(jsonData.message).to.include('updated');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Delete User",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": "{{base_url}}/api/v1/users/:user_id",
            "description": "Delete a user by their ID."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 or 204\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
                  "});",
                  "",
                  "pm.test(\"User deleted successfully\", function () {",
                  "    if (pm.response.code === 200) {",
                  "        var jsonData = pm.response.json();",
                  "        pm.expect(jsonData).to.have.property('message');",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Books",
      "description": "Book management endpoints. Public endpoints for browsing, admin-only for CRUD operations.",
      "item": [
        {
          "name": "Get All Books",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/books?category_id=&author_id=&min_price=&max_price=",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "books"
              ],
              "query": [
                {
                  "key": "category_id",
                  "value": "",
                  "description": "Filter by category ID"
                },
                {
                  "key": "author_id",
                  "value": "",
                  "description": "Filter by author ID"
                },
                {
                  "key": "min_price",
                  "value": "",
                  "description": "Minimum price filter"
                },
                {
                  "key": "max_price",
                  "value": "",
                  "description": "Maximum price filter"
                }
              ]
            },
            "description": "Get all books with optional filters for category, author, and price range."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is an array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});",
                  "",
                  "pm.test(\"Books have required fields\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.length > 0) {",
                  "        pm.expect(jsonData[0]).to.have.property('id');",
                  "        pm.expect(jsonData[0]).to.have.property('title');",
                  "        pm.expect(jsonData[0]).to.have.property('price');",
                  "        pm.expect(jsonData[0]).to.have.property('isbn');",
                  "    }",
                  "});",
                  "",
                  "pm.test(\"Price is a number\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.length > 0) {",
                  "        pm.expect(jsonData[0].price).to.be.a('number');",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": [
            {
              "name": "Get All Books Success",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/v1/books",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "books"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "[\n  {\n    \"id\": \"770e8400-e29b-41d4-a716-446655440002\",\n    \"title\": \"The Great Gatsby\",\n    \"isbn\": \"978-0-7432-7356-5\",\n    \"price\": 15.99,\n    \"stock_quantity\": 50,\n    \"description\": \"A classic American novel\",\n    \"author_id\": \"880e8400-e29b-41d4-a716-446655440003\",\n    \"author_name\": \"F. Scott Fitzgerald\",\n    \"category_id\": \"990e8400-e29b-41d4-a716-446655440004\",\n    \"category_type\": \"Fiction\"\n  },\n  {\n    \"id\": \"770e8400-e29b-41d4-a716-446655440005\",\n    \"title\": \"Clean Code\",\n    \"isbn\": \"978-0-1323-5088-4\",\n    \"price\": 42.99,\n    \"stock_quantity\": 30,\n    \"description\": \"A handbook of agile software craftsmanship\",\n    \"author_id\": \"880e8400-e29b-41d4-a716-446655440006\",\n    \"author_name\": \"Robert C. Martin\",\n    \"category_id\": \"990e8400-e29b-41d4-a716-446655440007\",\n    \"category_type\": \"Technology\"\n  }\n]"
            }
          ]
        },
        {
          "name": "Get Book by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/api/v1/books/:book_id",
            "description": "Get detailed information about a specific book."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Book object structure is valid\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('object');",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData).to.have.property('title');",
                  "    pm.expect(jsonData).to.have.property('price');",
                  "    pm.expect(jsonData).to.have.property('isbn');",
                  "    pm.expect(jsonData).to.have.property('author_name');",
                  "    pm.expect(jsonData).to.have.property('category_type');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": [
            {
              "name": "Get Book by ID Success",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": "{{base_url}}/api/v1/books/770e8400-e29b-41d4-a716-446655440002"
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"id\": \"770e8400-e29b-41d4-a716-446655440002\",\n  \"title\": \"The Great Gatsby\",\n  \"isbn\": \"978-0-7432-7356-5\",\n  \"price\": 15.99,\n  \"stock_quantity\": 50,\n  \"description\": \"A classic American novel set in the Jazz Age\",\n  \"author_id\": \"880e8400-e29b-41d4-a716-446655440003\",\n  \"author_name\": \"F. Scott Fitzgerald\",\n  \"category_id\": \"990e8400-e29b-41d4-a716-446655440004\",\n  \"category_type\": \"Fiction\",\n  \"average_rating\": 4.5,\n  \"review_count\": 127\n}"
            }
          ]
        },
        {
          "name": "Create Book (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"The Great Book\",\n  \"isbn\": \"978-0-123456-78-9\",\n  \"price\": 29.99,\n  \"stock_quantity\": 100,\n  \"description\": \"An amazing book about programming\",\n  \"author_id\": \"author-uuid-here\",\n  \"category_id\": \"category-uuid-here\"\n}"
            },
            "url": "{{base_url}}/api/v1/books",
            "description": "Create a new book. Requires admin access."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Book created successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData).to.have.property('title');",
                  "});",
                  "",
                  "// Save created book ID",
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set(\"created_book_id\", jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": [
            {
              "name": "Create Book Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"title\": \"The Great Book\",\n  \"isbn\": \"978-0-123456-78-9\",\n  \"price\": 29.99,\n  \"stock_quantity\": 100,\n  \"description\": \"An amazing book about programming\",\n  \"author_id\": \"author-uuid-here\",\n  \"category_id\": \"category-uuid-here\"\n}"
                },
                "url": "{{base_url}}/api/v1/books"
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"id\": \"770e8400-e29b-41d4-a716-446655440010\",\n  \"title\": \"The Great Book\",\n  \"isbn\": \"978-0-123456-78-9\",\n  \"price\": 29.99,\n  \"stock_quantity\": 100,\n  \"description\": \"An amazing book about programming\",\n  \"author_id\": \"author-uuid-here\",\n  \"category_id\": \"category-uuid-here\",\n  \"created_at\": \"2025-12-18T10:00:00Z\"\n}"
            }
          ]
        },
        {
          "name": "Update Book (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Updated Book Title\",\n  \"price\": 34.99,\n  \"stock_quantity\": 150\n}"
            },
            "url": "{{base_url}}/api/v1/books/:book_id",
            "description": "Update an existing book. Requires admin access."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Book updated successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Delete Book (Admin)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": "{{base_url}}/api/v1/books/:book_id",
            "description": "Delete a book. Requires admin access."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 or 204\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Add Book Review",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rating\": 5,\n  \"comment\": \"Excellent book! Highly recommended.\"\n}"
            },
            "url": "{{base_url}}/api/v1/books/:book_id/reviews",
            "description": "Add a review to a book. Rating must be between 1 and 5."
          }
        },
        {
          "name": "Get Book Reviews",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/api/v1/books/:book_id/reviews",
            "description": "Get all reviews for a specific book."
          }
        }
      ]
    },
    {
      "name": "Authors",
      "description": "Author management endpoints",
      "item": [
        {
          "name": "Get All Authors",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/api/v1/authors",
            "description": "Get a list of all authors."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is an array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get Author by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/api/v1/authors/:author_id",
            "description": "Get details of a specific author."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Author object is valid\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData).to.have.property('author_name');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Create Author (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"author_name\": \"John Smith\"\n}"
            },
            "url": "{{base_url}}/api/v1/authors",
            "description": "Create a new author. Requires admin access."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Author created successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Update Author (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"author_name\": \"John Smith Jr.\"\n}"
            },
            "url": "{{base_url}}/api/v1/authors/:author_id",
            "description": "Update an existing author. Requires admin access."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Delete Author (Admin)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": "{{base_url}}/api/v1/authors/:author_id",
            "description": "Delete an author. Requires admin access."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 or 204\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Categories",
      "description": "Category management endpoints",
      "item": [
        {
          "name": "Get All Categories",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/api/v1/categories",
            "description": "Get a list of all book categories."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is an array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get Category by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/api/v1/categories/:category_id",
            "description": "Get details of a specific category."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Category object is valid\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData).to.have.property('category_type');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Create Category (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"category_type\": \"Fiction\"\n}"
            },
            "url": "{{base_url}}/api/v1/categories",
            "description": "Create a new category. Requires admin access."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Category created successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Update Category (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"category_type\": \"Science Fiction\"\n}"
            },
            "url": "{{base_url}}/api/v1/categories/:category_id",
            "description": "Update an existing category. Requires admin access."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Delete Category (Admin)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": "{{base_url}}/api/v1/categories/:category_id",
            "description": "Delete a category. Requires admin access."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 or 204\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Cart",
      "description": "Shopping cart management endpoints. All endpoints require authentication.",
      "item": [
        {
          "name": "Get Cart",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": "{{base_url}}/api/v1/cart",
            "description": "Get the current user's shopping cart with items and total."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Cart structure is valid\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData).to.have.property('items');",
                  "    pm.expect(jsonData).to.have.property('total');",
                  "    pm.expect(jsonData.items).to.be.an('array');",
                  "});",
                  "",
                  "pm.test(\"Total is a number\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.total).to.be.a('number');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": [
            {
              "name": "Get Cart Success",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}"
                  }
                ],
                "url": "{{base_url}}/api/v1/cart"
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"id\": \"aa0e8400-e29b-41d4-a716-446655440020\",\n  \"user_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"items\": [\n    {\n      \"id\": \"bb0e8400-e29b-41d4-a716-446655440021\",\n      \"book_id\": \"770e8400-e29b-41d4-a716-446655440002\",\n      \"book_title\": \"The Great Gatsby\",\n      \"quantity\": 2,\n      \"price\": 15.99,\n      \"subtotal\": 31.98\n    },\n    {\n      \"id\": \"bb0e8400-e29b-41d4-a716-446655440022\",\n      \"book_id\": \"770e8400-e29b-41d4-a716-446655440005\",\n      \"book_title\": \"Clean Code\",\n      \"quantity\": 1,\n      \"price\": 42.99,\n      \"subtotal\": 42.99\n    }\n  ],\n  \"total\": 74.97,\n  \"item_count\": 3\n}"
            }
          ]
        },
        {
          "name": "Add Item to Cart",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"book_id\": \"book-uuid-here\",\n  \"quantity\": 1\n}"
            },
            "url": "{{base_url}}/api/v1/cart/items",
            "description": "Add a book to the shopping cart."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Item added to cart\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "    pm.expect(jsonData.message).to.include('added');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Update Cart Item",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"quantity\": 2\n}"
            },
            "url": "{{base_url}}/api/v1/cart/items/:cart_item_id",
            "description": "Update the quantity of an item in the cart."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Cart item updated\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Remove Item from Cart",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": "{{base_url}}/api/v1/cart/items/:cart_item_id",
            "description": "Remove a specific item from the cart."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 or 204\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Clear Cart",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": "{{base_url}}/api/v1/cart",
            "description": "Remove all items from the cart."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 or 204\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Orders",
      "description": "Order management endpoints",
      "item": [
        {
          "name": "Checkout",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"shipping_address\": \"123 Main Street\",\n  \"city\": \"New York\",\n  \"phone_number\": \"12345678901\"\n}"
            },
            "url": "{{base_url}}/api/v1/orders/checkout",
            "description": "Create an order from the current cart items."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Order created successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('order_id');",
                  "    pm.expect(jsonData).to.have.property('total');",
                  "    pm.expect(jsonData).to.have.property('status');",
                  "});",
                  "",
                  "// Save order ID for subsequent requests",
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set(\"created_order_id\", jsonData.order_id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": [
            {
              "name": "Checkout Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"shipping_address\": \"123 Main Street\",\n  \"city\": \"New York\",\n  \"phone_number\": \"12345678901\"\n}"
                },
                "url": "{{base_url}}/api/v1/orders/checkout"
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"order_id\": \"cc0e8400-e29b-41d4-a716-446655440030\",\n  \"user_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"total\": 74.97,\n  \"status\": \"pending\",\n  \"shipping_address\": \"123 Main Street\",\n  \"city\": \"New York\",\n  \"phone_number\": \"12345678901\",\n  \"created_at\": \"2025-12-18T10:00:00Z\",\n  \"items\": [\n    {\n      \"book_id\": \"770e8400-e29b-41d4-a716-446655440002\",\n      \"book_title\": \"The Great Gatsby\",\n      \"quantity\": 2,\n      \"price\": 15.99\n    },\n    {\n      \"book_id\": \"770e8400-e29b-41d4-a716-446655440005\",\n      \"book_title\": \"Clean Code\",\n      \"quantity\": 1,\n      \"price\": 42.99\n    }\n  ]\n}"
            }
          ]
        },
        {
          "name": "Get User Orders",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": "{{base_url}}/api/v1/orders",
            "description": "Get all orders for the current user."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is an array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});",
                  "",
                  "pm.test(\"Orders have required fields\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.length > 0) {",
                  "        pm.expect(jsonData[0]).to.have.property('order_id');",
                  "        pm.expect(jsonData[0]).to.have.property('total');",
                  "        pm.expect(jsonData[0]).to.have.property('status');",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get Recent Orders",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/orders/recent?limit=5",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "orders",
                "recent"
              ],
              "query": [
                {
                  "key": "limit",
                  "value": "5",
                  "description": "Number of recent orders to retrieve"
                }
              ]
            },
            "description": "Get recent orders for the current user."
          }
        },
        {
          "name": "Get Order by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": "{{base_url}}/api/v1/orders/:order_id",
            "description": "Get details of a specific order."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Order object is valid\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('order_id');",
                  "    pm.expect(jsonData).to.have.property('total');",
                  "    pm.expect(jsonData).to.have.property('status');",
                  "    pm.expect(jsonData).to.have.property('items');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": [
            {
              "name": "Get Order by ID Success",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}"
                  }
                ],
                "url": "{{base_url}}/api/v1/orders/cc0e8400-e29b-41d4-a716-446655440030"
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"order_id\": \"cc0e8400-e29b-41d4-a716-446655440030\",\n  \"user_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"total\": 74.97,\n  \"status\": \"shipped\",\n  \"shipping_address\": \"123 Main Street\",\n  \"city\": \"New York\",\n  \"phone_number\": \"12345678901\",\n  \"tracking_number\": \"TRACK123456789\",\n  \"created_at\": \"2025-12-18T10:00:00Z\",\n  \"updated_at\": \"2025-12-18T12:00:00Z\",\n  \"items\": [\n    {\n      \"id\": \"dd0e8400-e29b-41d4-a716-446655440031\",\n      \"book_id\": \"770e8400-e29b-41d4-a716-446655440002\",\n      \"book_title\": \"The Great Gatsby\",\n      \"quantity\": 2,\n      \"price\": 15.99,\n      \"subtotal\": 31.98\n    },\n    {\n      \"id\": \"dd0e8400-e29b-41d4-a716-446655440032\",\n      \"book_id\": \"770e8400-e29b-41d4-a716-446655440005\",\n      \"book_title\": \"Clean Code\",\n      \"quantity\": 1,\n      \"price\": 42.99,\n      \"subtotal\": 42.99\n    }\n  ]\n}"
            }
          ]
        },
        {
          "name": "Cancel Order",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": "{{base_url}}/api/v1/orders/:order_id/cancel",
            "description": "Cancel an order."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Order cancelled successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "    pm.expect(jsonData.message).to.include('cancelled');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get All Orders (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/admin/orders?status=",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "admin",
                "orders"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "",
                  "description": "Filter by order status"
                }
              ]
            },
            "description": "Get all orders. Requires admin access."
          }
        },
        {
          "name": "Update Order Status (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"shipped\"\n}"
            },
            "url": "{{base_url}}/api/v1/admin/orders/:order_id/status",
            "description": "Update the status of an order. Requires admin access."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Order status updated\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Update Tracking Number (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tracking_number\": \"TRACK123456789\"\n}"
            },
            "url": "{{base_url}}/api/v1/admin/orders/:order_id/tracking",
            "description": "Update the tracking number for an order. Requires admin access."
          }
        }
      ]
    },
    {
      "name": "Reviews",
      "description": "Review management endpoints",
      "item": [
        {
          "name": "Get All Reviews",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/api/v1/reviews/",
            "description": "Get all reviews."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is an array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get Review by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/api/v1/reviews/:review_id",
            "description": "Get a specific review by ID."
          }
        },
        {
          "name": "Get Reviews by Book",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/api/v1/reviews/book/:book_id",
            "description": "Get all reviews for a specific book."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is an array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});",
                  "",
                  "pm.test(\"Reviews have required fields\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.length > 0) {",
                  "        pm.expect(jsonData[0]).to.have.property('id');",
                  "        pm.expect(jsonData[0]).to.have.property('rating');",
                  "        pm.expect(jsonData[0]).to.have.property('comment');",
                  "        pm.expect(jsonData[0].rating).to.be.within(1, 5);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": [
            {
              "name": "Get Reviews by Book Success",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": "{{base_url}}/api/v1/reviews/book/770e8400-e29b-41d4-a716-446655440002"
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "[\n  {\n    \"id\": \"ee0e8400-e29b-41d4-a716-446655440040\",\n    \"book_id\": \"770e8400-e29b-41d4-a716-446655440002\",\n    \"user_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"username\": \"johndoe\",\n    \"rating\": 5,\n    \"comment\": \"Excellent book! Highly recommended.\",\n    \"created_at\": \"2025-12-15T10:00:00Z\"\n  },\n  {\n    \"id\": \"ee0e8400-e29b-41d4-a716-446655440041\",\n    \"book_id\": \"770e8400-e29b-41d4-a716-446655440002\",\n    \"user_id\": \"550e8400-e29b-41d4-a716-446655440001\",\n    \"username\": \"janedoe\",\n    \"rating\": 4,\n    \"comment\": \"Great read, very engaging.\",\n    \"created_at\": \"2025-12-16T14:30:00Z\"\n  }\n]"
            }
          ]
        },
        {
          "name": "Get Book Rating Summary",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{base_url}}/api/v1/reviews/book/:book_id/summary",
            "description": "Get rating summary for a book."
          }
        },
        {
          "name": "Get User Reviews",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": "{{base_url}}/api/v1/reviews/user/:user_id",
            "description": "Get all reviews by a user. Users can only view their own reviews unless admin."
          }
        },
        {
          "name": "Create Review",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"book_id\": \"book-uuid-here\",\n  \"rating\": 5,\n  \"comment\": \"Great book!\"\n}"
            },
            "url": "{{base_url}}/api/v1/reviews/",
            "description": "Create a new review for a book."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Review created successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData).to.have.property('rating');",
                  "    pm.expect(jsonData.rating).to.be.within(1, 5);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": [
            {
              "name": "Create Review Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"book_id\": \"book-uuid-here\",\n  \"rating\": 5,\n  \"comment\": \"Great book!\"\n}"
                },
                "url": "{{base_url}}/api/v1/reviews/"
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"id\": \"ee0e8400-e29b-41d4-a716-446655440042\",\n  \"book_id\": \"770e8400-e29b-41d4-a716-446655440002\",\n  \"user_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"rating\": 5,\n  \"comment\": \"Great book!\",\n  \"created_at\": \"2025-12-18T10:00:00Z\"\n}"
            }
          ]
        },
        {
          "name": "Update Review",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rating\": 4,\n  \"comment\": \"Updated review comment\"\n}"
            },
            "url": "{{base_url}}/api/v1/reviews/:review_id",
            "description": "Update an existing review. Users can only update their own reviews."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Review updated successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Delete Review",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": "{{base_url}}/api/v1/reviews/:review_id",
            "description": "Delete a review. Users can only delete their own reviews unless admin."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 or 204\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Cart History",
      "description": "Cart history tracking endpoints",
      "item": [
        {
          "name": "Get All Cart History (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": "{{base_url}}/api/v1/cart-history/",
            "description": "Get all cart history records. Requires admin access."
          }
        },
        {
          "name": "Get Cart History by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": "{{base_url}}/api/v1/cart-history/:cart_history_id",
            "description": "Get a specific cart history record."
          }
        },
        {
          "name": "Get User Cart History",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": "{{base_url}}/api/v1/cart-history/user/:user_id",
            "description": "Get cart history for a specific user."
          }
        },
        {
          "name": "Get Order Item History (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": "{{base_url}}/api/v1/cart-history/order-item/:order_item_id",
            "description": "Get cart history for an order item. Requires admin access."
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Collection-level pre-request script",
          "// This runs before every request in the collection",
          "",
          "// Log the request being made",
          "console.log('Making request to: ' + pm.request.url);",
          "",
          "// Check if access token exists for authenticated requests",
          "if (pm.request.headers.has('Authorization')) {",
          "    const token = pm.environment.get('access_token');",
          "    if (!token || token === '') {",
          "        console.warn('Warning: Authorization header present but access_token is empty');",
          "    }",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Collection-level test script",
          "// This runs after every request in the collection",
          "",
          "// Log response time",
          "console.log('Response time: ' + pm.response.responseTime + 'ms');",
          "",
          "// Check for common error responses",
          "if (pm.response.code === 401) {",
          "    console.error('Authentication failed - token may be expired');",
          "} else if (pm.response.code === 403) {",
          "    console.error('Access forbidden - insufficient permissions');",
          "} else if (pm.response.code >= 500) {",
          "    console.error('Server error occurred');",
          "}"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:5000",
      "type": "string"
    },
    {
      "key": "access_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "refresh_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "created_user_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "created_book_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "created_order_id",
      "value": "",
      "type": "string"
    }
  ]
}